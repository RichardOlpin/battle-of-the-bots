<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="popup.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <title>AuraFlow</title>
</head>

<body>
    <div class="background-gradient"></div>
    <div id="app" role="main">
        <div class="app-header">
            <div class="logo-small">A</div>
            <h1>AuraFlow</h1>
        </div>
        <!-- Authentication State -->
        <div id="auth-screen" class="screen" role="region" aria-label="Authentication">
            <div class="logo-container">
                <div class="logo">A</div>
                <h2>AuraFlow</h2>
            </div>
            <p>Connect your Google Calendar to see today's events</p>
            <button id="connect-btn" aria-label="Connect to Google Calendar" tabindex="0">
                <span class="btn-icon">üîó</span>
                Connect Google Calendar
            </button>
        </div>

        <!-- Calendar Events State -->
        <div id="events-screen" class="screen hidden" role="region" aria-label="Calendar Events">
            <div class="header">
                <h3 id="date-header">Today's Events</h3>
                <div class="header-buttons">
                    <button id="refresh-btn" class="icon-btn" aria-label="Refresh events" title="Refresh events" tabindex="0">
                        <span class="btn-icon">‚Üª</span>
                    </button>
                    <button id="logout-btn" class="secondary-btn" aria-label="Logout from Google Calendar" tabindex="0">
                        Logout
                    </button>
                </div>
            </div>
            
            <!-- Quick Focus Session Button -->
            <div class="quick-focus-section">
                <button id="quick-focus-btn" class="quick-focus-btn" aria-label="Start quick focus session">
                    <div class="quick-focus-content">
                        <span class="quick-focus-icon">üéØ</span>
                        <div class="quick-focus-text">
                            <span class="quick-focus-title">Quick Focus</span>
                            <span class="quick-focus-subtitle">Start 25-min session</span>
                        </div>
                    </div>
                </button>
            </div>
            
            <!-- Theme Switcher -->
            <div class="theme-switcher">
                <h4>Theme</h4>
                <div class="theme-buttons">
                    <button id="theme-light-button" class="theme-button theme-light-preview" aria-label="Light theme">
                        <span class="sr-only">Light Theme</span>
                    </button>
                    <button id="theme-dark-button" class="theme-button theme-dark-preview" aria-label="Dark theme">
                        <span class="sr-only">Dark Theme</span>
                    </button>
                    <button id="theme-calm-button" class="theme-button theme-calm-preview" aria-label="Calm theme">
                        <span class="sr-only">Calm Theme</span>
                    </button>
                    <button id="theme-beach-button" class="theme-button theme-beach-preview" aria-label="Beach theme">
                        <span class="sr-only">Beach Theme</span>
                    </button>
                    <button id="theme-rain-button" class="theme-button theme-rain-preview" aria-label="Rain theme">
                        <span class="sr-only">Rain Theme</span>
                    </button>
                </div>
            </div>
            <div id="events-container" role="list" aria-label="Today's calendar events">
                <!-- Events will be populated here -->
            </div>
            <div id="no-events" class="hidden" role="status" aria-live="polite">
                <p>No events today</p>
            </div>
            
            <!-- AI Features Section -->
            <div id="ai-features" class="ai-features-section">
                <h4>AI-Powered Features</h4>
                <div class="ai-buttons">
                    <button id="find-focus-btn" class="ai-btn" aria-label="Find optimal focus time" tabindex="0">
                        <span class="btn-icon">üéØ</span>
                        Find Focus Time
                    </button>
                    <button id="generate-ritual-btn" class="ai-btn" aria-label="Generate personalized ritual" tabindex="0">
                        <span class="btn-icon">‚ú®</span>
                        Generate Ritual
                    </button>
                </div>
                
                <!-- AI Results Display -->
                <div id="ai-results" class="ai-results hidden" role="region" aria-label="AI Results">
                    <!-- Results will be populated here -->
                </div>
            </div>
            
            <!-- Website Blocking Section -->
            <div id="blocking-settings" class="blocking-section">
                <h4>üõ°Ô∏è Distraction Shield</h4>
                <p class="blocking-description">Block distracting websites during focus sessions</p>
                <label for="blocked-sites-list" class="blocking-label">Sites to Block (one per line, e.g., youtube.com)</label>
                <textarea 
                    id="blocked-sites-list" 
                    class="blocked-sites-textarea" 
                    placeholder="youtube.com&#10;twitter.com&#10;facebook.com"
                    rows="4"
                    aria-label="List of websites to block during focus sessions"
                ></textarea>
                <button id="save-blocked-sites-button" class="primary-btn" aria-label="Save blocked sites list">
                    <span class="btn-icon">üíæ</span>
                    Save List
                </button>
            </div>
            
            <!-- Quick Start Section -->
            <div class="quick-start-section">
                <button id="quick-start-button" class="primary-btn quick-start-btn hidden" aria-label="Start session with previous settings">
                    <span class="quick-start-icon">‚ö°</span>
                    <span class="quick-start-text">Quick Start</span>
                </button>
                <p id="quick-start-description" class="quick-start-description hidden">Start 'Deep Work' Session</p>
            </div>
        </div>
        
        <!-- Session Screen (Focus Mode) -->
        <div id="session-screen" class="screen hidden" role="region" aria-label="Focus Session">
            <div class="session-container">
                <div class="timer-display" id="timer-display">25:00</div>
                
                <div class="session-controls">
                    <div class="control-group">
                        <label for="volume-slider">Volume</label>
                        <input type="range" id="volume-slider" min="0" max="100" value="50" class="volume-slider" aria-label="Volume control">
                    </div>
                    
                    <div class="control-group">
                        <label for="soundscape-selector">Soundscape</label>
                        <select id="soundscape-selector" class="soundscape-selector" aria-label="Select soundscape">
                            <!-- Options injected via popup.js -->
                        </select>
                    </div>
                    
                    <div class="button-group">
                        <button id="start-btn" class="session-btn" aria-label="Start session">Start</button>
                        <button id="pause-btn" class="session-btn hidden" aria-label="Pause session">Pause</button>
                        <button id="stop-btn" class="session-btn hidden" aria-label="Stop session">Stop</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loading State -->
        <div id="loading-screen" class="screen hidden" role="status" aria-live="polite" aria-label="Loading">
            <div class="loading-content">
                <div class="spinner-container">
                    <div class="spinner" role="progressbar" aria-label="Loading events"></div>
                </div>
                <p id="loading-message">Loading events...</p>
            </div>
        </div>

        <!-- Error State -->
        <div id="error-screen" class="screen hidden" role="alert" aria-live="assertive" aria-label="Error">
            <div class="error-icon">‚ö†Ô∏è</div>
            <p id="error-message">Something went wrong</p>
            <button id="retry-btn" aria-label="Retry action" tabindex="0">
                <span class="btn-icon">üîÑ</span>
                Try Again
            </button>
        </div>
    </div>
    <script src="popup.js"></script>
    
    <!-- Add a subtle background animation -->
    <div class="background-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
        <div class="shape shape-3"></div>
        <div class="shape shape-4"></div>
    </div>
</body>

</html>
